"use strict";const charactersList=document.querySelector(".js__characters"),favouritesList=document.querySelector(".js__favourites"),searchInput=document.querySelector(".js__search_input"),sectionFavourites=document.querySelector(".js__favourites_section"),searchBtn=document.querySelector(".js__search_btn"),resetBtn=document.querySelector(".js__reset_btn");let myCharactersList=[],myFavouritesList=[],filteredCharacters=[];renderCharactersList(),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{myCharactersList=e,localStorageInformation(favouritesListLS,"myFavouritesList"),renderCharactersList()});const favouritesListLS=JSON.parse(localStorage.getItem("myFavouritesList"));function renderCharacter(e){const t=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.char_id)),s=document.createElement("li");s.classList.add("characters__list_item");const a=document.createElement("article");a.classList.add("js__characters_article"),a.classList.add("characters__article"),a.classList.add("characters__favourites"),a.classList.add("remove"),-1!==t&&a.classList.add("selected"),a.setAttribute("id",e.char_id);const r=document.createElement("img");r.classList.add("characters__article--img"),r.classList.add("characters__favourites--img"),r.setAttribute("src",e.img),r.setAttribute("alt",e.name);const i=document.createElement("h2");i.classList.add("characters__article--name"),i.classList.add("characters__favourites--name");const c=document.createTextNode(e.name);i.appendChild(c);const n=document.createElement("p");n.classList.add("characters__article--status"),n.classList.add("characters__favourites--status");const d=document.createTextNode(e.status);return n.appendChild(d),a.appendChild(r),a.appendChild(i),a.appendChild(n),s.appendChild(a),s}function renderCharactersList(){charactersList.innerHTML="";for(let e=0;e<myCharactersList.length;e++)charactersList.appendChild(renderCharacter(myCharactersList[e]));addListenerCharacters()}function addListenerCharacters(){const e=document.querySelectorAll(".js__characters_article");for(const t of e)t.addEventListener("click",handleCharactersClic)}function favouriteRender(e){const t=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.char_id)),s=document.createElement("li");s.classList.add("characters__list_item");const a=document.createElement("article");a.classList.add("js__characters_article"),a.classList.add("characters__article"),a.classList.add("characters__favourites"),a.classList.add("remove"),-1!==t&&a.classList.add("selected"),a.setAttribute("id",e.char_id);const r=document.createElement("div");r.classList.add("js__remove_crox"),r.classList.add("characters__favourites--crox");const i=document.createTextNode("X");r.appendChild(i);const c=document.createElement("img");c.classList.add("characters__article--img"),c.classList.add("characters__favourites--img"),c.setAttribute("src",e.img),c.setAttribute("alt",e.name);const n=document.createElement("h2");n.classList.add("characters__article--name"),n.classList.add("characters__favourites--name");const d=document.createTextNode(e.name);n.appendChild(d);const o=document.createElement("p");o.classList.add("characters__article--status"),o.classList.add("characters__favourites--status");const l=document.createTextNode(e.status);return o.appendChild(l),a.appendChild(r),a.appendChild(c),a.appendChild(n),a.appendChild(o),s.appendChild(a),s}function renderFavouritesList(){favouritesList.innerHTML="";for(let e=0;e<myFavouritesList.length;e++)favouritesList.appendChild(favouriteRender(myFavouritesList[e]));addListenerFavourites()}function handleCharactersClic(e){e.currentTarget.classList.toggle("selected");const t=myCharactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),s=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===s?myFavouritesList.push(t):myFavouritesList.splice(s,1),localStorage.setItem("myFavouritesList",JSON.stringify(myFavouritesList)),myFavouritesList.length>0?(sectionFavourites.classList.remove("hidden"),renderFavouritesList()):sectionFavourites.classList.add("hidden")}function handleFavoritesClick(e){e.currentTarget.classList.toggle("selected");const t=myCharactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),s=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===s?myFavouritesList.push(t):myFavouritesList.splice(s,1),localStorage.setItem("myFavouritesList",JSON.stringify(myFavouritesList)),myFavouritesList.length>0?(sectionFavourites.classList.remove("hidden"),renderFavouritesList()):sectionFavourites.classList.add("hidden"),renderCharactersList()}function addListenerFavourites(){const e=document.querySelectorAll(".js__favourites_article");for(const t of e)t.addEventListener("click",handleFavoritesClick)}function renderFilteredCharacters(){let e="";for(let t=0;t<filteredCharacters.length;t++)e+=renderCharacter(filteredCharacters[t]);charactersList.innerHTML=e,addListenerCharacters()}function resetBtnClick(e){e.preventDefault(),myFavouritesList=[],sectionFavourites.classList.add("hidden"),localStorage.removeItem("myFavouritesList"),renderCharactersList()}function localStorageInformation(e,t){localStorage.setItem(t,JSON.stringify(e))}null!==favouritesListLS&&(myFavouritesList=favouritesListLS,sectionFavourites.classList.remove("hidden"),renderFavouritesList()),searchBtn.addEventListener("click",e=>{e.preventDefault();const t=searchInput.value.toLowerCase();filteredCharacters=myCharactersList.filter(e=>e.name.toLowerCase().includes(t)),renderFilteredCharacters()}),resetBtn.addEventListener("click",resetBtnClick);