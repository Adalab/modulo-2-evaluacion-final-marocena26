"use strict";const charactersList=document.querySelector(".js__characters"),favouritesList=document.querySelector(".js__favourites"),searchInput=document.querySelector(".js__search_input"),sectionFavourites=document.querySelector(".js__favourites_section"),searchBtn=document.querySelector(".js__search_btn"),resetBtn=document.querySelector(".js__reset_btn");let myCharactersList=[],myFavouritesList=[],filteredCharacters=[];renderCharactersList(),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{myCharactersList=e,localStorageInformation(favouritesListLS,"myFavouritesList"),renderCharactersList()});const favouritesListLS=JSON.parse(localStorage.getItem("myFavouritesList"));function renderCharacter(e){let t="";return t=-1===myFavouritesList.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`<li>\n    <article class="js__characters_article ${t} characters__article characters__favourites remove" id="${e.char_id}"> \n        <img src="${e.img}" alt="" class="characters__article--img characters__favourites--img">\n        <h3 class="characters__article--name characters__favourites--name">${e.name}</h3>\n        <p class="characters__article--status characters__favourites--status">${e.status}</p>\n    </article>\n    </li>`}function favouriteRender(e){let t="";return t=-1===myFavouritesList.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`<li>\n    <article class="js__favourites_article ${t} characters__article characters__favourites remove" id="${e.char_id}">\n        <i class="pepito"></i>\n        <img src="${e.img}" alt="" class="characters__article--img characters__favourites--img">\n        <h3 class="characters__article--name characters__favourites--name">${e.name}</h3>\n        <p class="characters__article--status characters__favourites--status">${e.status}</p>\n    </article>\n    </li>`}function renderCharactersList(){let e="";for(let t=0;t<myCharactersList.length;t++)e+=renderCharacter(myCharactersList[t]);charactersList.innerHTML=e,addListenerCharacters()}function addListenerCharacters(){const e=document.querySelectorAll(".js__characters_article");for(const t of e)t.addEventListener("click",handleCharactersClic)}function renderFavouritesList(){let e="";for(let t=0;t<myFavouritesList.length;t++)e+=favouriteRender(myFavouritesList[t]);favouritesList.innerHTML=e,addListenerFavourites()}function handleCharactersClic(e){e.currentTarget.classList.toggle("selected");const t=myCharactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?myFavouritesList.push(t):myFavouritesList.splice(r,1),localStorage.setItem("myFavouritesList",JSON.stringify(myFavouritesList)),myFavouritesList.length>0?(sectionFavourites.classList.remove("hidden"),renderFavouritesList()):sectionFavourites.classList.add("hidden")}function handleFavoritesClick(e){e.currentTarget.classList.toggle("selected");const t=myCharactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?myFavouritesList.push(t):myFavouritesList.splice(r,1),localStorage.setItem("myFavouritesList",JSON.stringify(myFavouritesList)),myFavouritesList.length>0?(sectionFavourites.classList.remove("hidden"),renderFavouritesList()):sectionFavourites.classList.add("hidden"),renderCharactersList()}function addListenerFavourites(){const e=document.querySelectorAll(".js__favourites_article");for(const t of e)t.addEventListener("click",handleFavoritesClick)}function renderFilteredCharacters(){let e="";for(let t=0;t<filteredCharacters.length;t++)e+=renderCharacter(filteredCharacters[t]);charactersList.innerHTML=e,addListenerCharacters()}function resetBtnClick(e){e.preventDefault(),myFavouritesList=[],sectionFavourites.classList.add("hidden"),localStorage.removeItem("myFavouritesList"),renderCharactersList()}function localStorageInformation(e,t){localStorage.setItem(t,JSON.stringify(e))}null!==favouritesListLS&&(myFavouritesList=favouritesListLS,sectionFavourites.classList.remove("hidden"),renderFavouritesList()),searchBtn.addEventListener("click",e=>{e.preventDefault();const t=searchInput.value.toLowerCase();filteredCharacters=myCharactersList.filter(e=>e.name.toLowerCase().includes(t)),renderFilteredCharacters()}),resetBtn.addEventListener("click",resetBtnClick);