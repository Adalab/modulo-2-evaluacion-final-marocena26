"use strict";const charactersList=document.querySelector(".js__characters"),favouritesList=document.querySelector(".js__favourites"),searchInput=document.querySelector(".js__search_input"),searchBtn=document.querySelector(".js__search_btn");let myCharactersList=[],myFavouritesList=[],filteredCharacters=[];function renderCharacter(e){let t="";return t=-1===myFavouritesList.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`<li>\n    <article class="js__characters_article ${t} characters__article" id="${e.char_id}"> \n        <img src="${e.img}" alt="" class="characters__article--img">\n        <h3 class="characters__article--name">${e.name}</h3>\n        <p class="characters__article--status">${e.status}</p>\n    </article>\n    </li>`}function selectFavouriteCharacters(){const e=document.querySelectorAll(".js__characters_article");for(const t of e)t.addEventListener("click",handleClickFavourites)}function renderCharactersList(){let e="";for(let t=0;t<myCharactersList.length;t++)e+=renderCharacter(myCharactersList[t]);charactersList.innerHTML=e,selectFavouriteCharacters()}function renderFavouritesList(){let e="";for(let t=0;t<myFavouritesList.length;t++)e+=renderCharacter(myFavouritesList[t]);favouritesList.innerHTML=e}function renderFilteredCharacters(){let e="";for(let t=0;t<filteredCharacters.length;t++)e+=renderCharacter(filteredCharacters[t]);charactersList.innerHTML=e}function handleClickFavourites(e){e.currentTarget.classList.toggle("selected");const t=myCharactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=myFavouritesList.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?myFavouritesList.push(t):myFavouritesList.splice(r,1),localStorage.setItem("myFavouritesList",JSON.stringify(myFavouritesList)),renderFavouritesList()}searchBtn.addEventListener("click",e=>{e.preventDefault();const t=searchInput.value.toLowerCase();filteredCharacters=myCharactersList.filter(e=>e.name.toLowerCase().includes(t)),renderFilteredCharacters()}),renderCharactersList(),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{myCharactersList=e,renderCharactersList()});const favouritesListLS=JSON.parse(localStorage.getItem("myFavouritesList"));null!==favouritesListLS&&(myFavouritesList=favouritesListLS,renderFavouritesList());